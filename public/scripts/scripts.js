"use strict";angular.module("jpApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.router","satellizer"]).config(["$routeProvider","$stateProvider","$urlRouterProvider","$authProvider",function(a,b,c,d){d.loginUrl="/api/authenticate",c.otherwise("/"),a.when("/jobs",{templateUrl:"views/jobs.html",controller:"jobsCtrl"}).otherwise({templateUrl:"Not Found"})}]),angular.module("jpApp").controller("MainCtrl",function(){}),angular.module("jpApp").controller("JobsCtrl",["$scope","jobs",function(a,b){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],a.init=function(){b.getJobs().then(function(a){console.log("result",a)})},a.init()}]),angular.module("jpApp",[]).service("modal",["$q","$compile",function(a,b){return{modal:function(c,d,e,f,g){var h="",i=a.defer();return h+='<div id="modal" class="modal fade" tabindex="-1" role="dialog">',h+='<div class="modal-dialog '+("small"===c?"modal-sm":"large "===c?"modal-lg":"")+'" role="document">',h+='<div class="modal-content">',h+='<div class="modal-header">',h+='<button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="closeModal($event)"><span aria-hidden="true">&times;</span></button>',h+='<h4 class="modal-title">'+d+"</h4>",h+="</div>",h+='<div class="modal-body">'+e+"</div>",h+=f?'<div class="modal-footer">'+f+"</div>":"",h+="</div>",h+="</div>",h+="</div>",angular.element("body").append(b(h)(g)),i.resolve(h),angular.element("#modal").modal("show").on("hidden.bs.modal",function(){this.remove()}),i.promise}}}]),angular.module("jpApp").controller("UserCtrl",["$scope","$rootScope","modal","elements","validation","auth","form",function(a,b,c,d,e,f,g){a.signIn=function(){var b="small",e="Login",f=g.login(),h=d.button({type:"submit",cls:"btn-primary btn-lg btn-block",ngClick:"login($event)"},"Login");c.modal(b,e,f,h,a).then(function(a){console.log(a)})},a.login=function(a){a.preventDefault(),console.log(b);var c=angular.element(a.currentTarget).parents()[1],d=angular.element(c).find("form").serializeArray(),g={email:d[0].value,password:d[1].value};e.validate(d).then(function(a){angular.element(".spinner").remove(),a.valid?f.authenticate(g).then(function(a){console.log("Authentication Result",a)}):console.log(a)})},a.closeModal=function(){angular.element("#modal").modal("hide")}}]),angular.module("jpApp").factory("elements",function(){return{column:function(a,b){var c="";return"number"==typeof a?(c+='<div class="col-md-'+a+'">',c+=b,c+="</div>"):(c+='<div class="col-md-'+a[0]+" col-xs-"+a[1]+'">',c+=b,c+="</div>")},button:function(a,b){var c="";return c+='<button class="btn '+a.cls+'"',c+=a.type?'type="'+a.type+'"':"",c+=a.ngClick?'ng-click="'+a.ngClick+'">':">",c+=b,c+="</button>"},form:{input:function(a){var b="";return b+='<input type="'+a.type+'"',b+='class="form-control '+a.cls+'"',b+=a.id?' id="'+a.id+'"':"",b+=' placeholder="'+a.placeholder+'"',b+=a.model?' ng-model="'+a.model+'"':"",b+=a.name?' name="'+a.name+'"':"",b+=a.required?' data-required="true"':"",b+=">"},inputGroup:function(a,b){var c="",d=this;return c+='<div class="input-group">',c+='<span class="input-group-addon">'+a+"</span>",c+=d.input(b),c+="</div>"}},glyph:function(a){var b="";return b+='<span class="glyphicon glyphicon-'+a+'" aria-hidden="true"></span>'}}}),angular.module("jpApp").service("validation",["$q",function(a){return{validate:function(b){var c=a.defer(),d=[],e=angular.element(b),f=0,g=e.find("input").length;return e.find("input").each(function(){var a=angular.element(this);a[0].dataset.required?a.val()?(a.parent().removeClass("has-success").removeClass("has-error").addClass("has-success"),d.push({name:a[0].name,value:a.val(),validated:!0}),f++):(a.parent().removeClass("has-success").removeClass("has-error").addClass("has-error"),d.push({name:a[0].name,value:a.val(),validated:!1})):(a.parent().removeClass("has-error").addClass("has-success"),d.push({name:a[0].name,value:a.val(),validated:!0}))}),console.log("Form Object",f,g),f===g?c.resolve({valid:!0,form:b}):c.resolve({valid:!1,form:b}),c.promise}}}]),angular.module("jpApp").service("auth",["$q","$http",function(a,b){return{authenticate:function(c){var d=a.defer();return console.log("Form Object",c),b.post("/api/authenticate",c).then(function(a){console.log(a),d.resolve(a)},function(a){console.log(a),d.resolve(a)}),d.promise}}}]),angular.module("jpApp").service("form",["elements",function(a){return{login:function(){var b="";return b+="<form>",b+='<div class="row form-group">',b+=a.column(12,a.form.inputGroup(a.glyph("user"),{type:"email",cls:"input-lg",placeholder:"Email",model:"",name:"email",required:!0})),b+="</div>",b+='<div class="row form-group">',b+=a.column(12,a.form.inputGroup(a.glyph("lock"),{type:"password",cls:"input-lg",placeholder:"Password",model:"",name:"password",required:!0})),b+="</div>",b+="</form>"},register:function(){var a="";return a}}}]),angular.module("jpApp").controller("AuthCtrl",["$auth","$state","$rootScope","$scope","validation","form","elements","modal",function(a,b,c,d,e,f,g,h){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],d.login=function(a){a.preventDefault(),console.log(c);var b=angular.element(a.currentTarget).parents()[1],d=angular.element(b).find("form").serializeArray();e.validate(d).then(function(a){angular.element(".spinner").remove(),a.valid||console.log(a)})},d.signIn=function(){var a="small",b="Login",c=f.login(),e=g.button({type:"submit",cls:"btn-primary btn-lg btn-block",ngClick:"login($event)"},"Login");h.modal(a,b,c,e,d).then(function(a){console.log(a)})},d.closeModal=function(){angular.element("#modal").modal("hide").remove()}}]),angular.module("jpApp").service("jobs",["$http",function(a){return{getJobs:function(){return a.get("jobs")}}}]),angular.module("jpApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/jobs.html",'<main class="container-fluid"> <div class="row"> <aside class="sidebar col-md-3"> </aside> <section id="jobs" class="main col-md-9"> <p>This is a jobs view</p> </section> </div> </main><!-- /.container -->'),a.put("views/main.html",'<main class="container-fluid"> <div class="row"> <section id="home" class="col-md-8 center-block"> <form class="valign"> <div class="row"> <div class="col-md-5"> <div class="form-group"> <input type="text" class="form-control input-lg" id="job-title" placeholder="Job Title"> </div> </div> <div class="col-md-5"> <div class="form-group"> <input type="text" class="form-control input-lg" id="job-location" placeholder="Location"> </div> </div> <div class="col-md-2"> <button class="btn btn-primary btn-block btn-lg" type="submit">Find Jobs</button> </div> </div> </form> </section> </div> </main><!-- /.container -->')}]);